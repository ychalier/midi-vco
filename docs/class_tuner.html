<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIDI-VCO: Tuner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIDI-VCO
   &#160;<span id="projectnumber">3.0.0-dev.1</span>
   </div>
   <div id="projectbrief">Arduino firmware for an interface between a MIDI keyboard and a set of VCOs.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_tuner.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tuner-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Tuner Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="tuner_8h_source.html">tuner.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5e1f77893d0e3f5ed2cf3a14fdbc321c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tuner.html#a5e1f77893d0e3f5ed2cf3a14fdbc321c">Tuner</a> ()</td></tr>
<tr class="separator:a5e1f77893d0e3f5ed2cf3a14fdbc321c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7ab2775d9b3a5e5c6c2e6fc729bc114"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tuner.html#af7ab2775d9b3a5e5c6c2e6fc729bc114">setup</a> ()</td></tr>
<tr class="separator:af7ab2775d9b3a5e5c6c2e6fc729bc114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d286601d2ae0ccbb7c18c45ba07c34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_tuning.html">Tuning</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tuner.html#a19d286601d2ae0ccbb7c18c45ba07c34">get_tuning_ref</a> (int lane_id)</td></tr>
<tr class="separator:a19d286601d2ae0ccbb7c18c45ba07c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb69c9b1224835c6099c3a39cb153749"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tuner.html#afb69c9b1224835c6099c3a39cb153749">reset_tunings</a> ()</td></tr>
<tr class="separator:afb69c9b1224835c6099c3a39cb153749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8962f486cba07837bd690300aeb9637a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tuner.html#a8962f486cba07837bd690300aeb9637a">tune_fast</a> (<a class="el" href="class_allocator.html">Allocator</a> *allocator)</td></tr>
<tr class="separator:a8962f486cba07837bd690300aeb9637a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:afad0b11daba99cec12cb65a08a6ce035"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tuner.html#afad0b11daba99cec12cb65a08a6ce035">_read_tunings_from_eeprom</a> ()</td></tr>
<tr class="separator:afad0b11daba99cec12cb65a08a6ce035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c273f35f532e479b07cf102827327be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tuner.html#a3c273f35f532e479b07cf102827327be">_write_tunings_to_eeprom</a> ()</td></tr>
<tr class="separator:a3c273f35f532e479b07cf102827327be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6d9f05f42a8be248404062d55583d703"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_tuning.html">Tuning</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tuner.html#a6d9f05f42a8be248404062d55583d703">_tunings</a> [<a class="el" href="constants_8h.html#a73afc0e3de7253b20d26d43395608527">LANE_COUNT</a>]</td></tr>
<tr class="separator:a6d9f05f42a8be248404062d55583d703"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A wrapper for storing and computing tuning parameters. </p>

<p class="definition">Definition at line <a class="el" href="tuner_8h_source.html#l00014">14</a> of file <a class="el" href="tuner_8h_source.html">tuner.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5e1f77893d0e3f5ed2cf3a14fdbc321c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e1f77893d0e3f5ed2cf3a14fdbc321c">&#9670;&nbsp;</a></span>Tuner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tuner::Tuner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tuner_8cpp_source.html#l00006">6</a> of file <a class="el" href="tuner_8cpp_source.html">tuner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;{</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="constants_8h.html#a73afc0e3de7253b20d26d43395608527">LANE_COUNT</a>; i++)</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    {</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        <a class="code" href="class_tuner.html#a6d9f05f42a8be248404062d55583d703">_tunings</a>[i] = {0.0f, 1.0f};</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    }</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;}</div>
<div class="ttc" id="aclass_tuner_html_a6d9f05f42a8be248404062d55583d703"><div class="ttname"><a href="class_tuner.html#a6d9f05f42a8be248404062d55583d703">Tuner::_tunings</a></div><div class="ttdeci">Tuning _tunings[LANE_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="tuner_8h_source.html#l00049">tuner.h:49</a></div></div>
<div class="ttc" id="aconstants_8h_html_a73afc0e3de7253b20d26d43395608527"><div class="ttname"><a href="constants_8h.html#a73afc0e3de7253b20d26d43395608527">LANE_COUNT</a></div><div class="ttdeci">#define LANE_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00099">constants.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afad0b11daba99cec12cb65a08a6ce035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afad0b11daba99cec12cb65a08a6ce035">&#9670;&nbsp;</a></span>_read_tunings_from_eeprom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tuner::_read_tunings_from_eeprom </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tuner_8cpp_source.html#l00057">57</a> of file <a class="el" href="tuner_8cpp_source.html">tuner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="constants_8h.html#a73afc0e3de7253b20d26d43395608527">LANE_COUNT</a>; i++)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordtype">int</span> address = 1 + <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a1aade9389993911d5c5bcdf3d9f9fec9">Tuning</a>) * i;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="struct_tuning.html">Tuning</a> tuning;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        EEPROM.get(address, tuning);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
<div class="ttc" id="astruct_tuning_html"><div class="ttname"><a href="struct_tuning.html">Tuning</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00021">structs.h:22</a></div></div>
<div class="ttc" id="astructs_8h_html_a1aade9389993911d5c5bcdf3d9f9fec9"><div class="ttname"><a href="structs_8h.html#a1aade9389993911d5c5bcdf3d9f9fec9">Tuning</a></div><div class="ttdeci">struct Tuning Tuning</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c273f35f532e479b07cf102827327be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c273f35f532e479b07cf102827327be">&#9670;&nbsp;</a></span>_write_tunings_to_eeprom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tuner::_write_tunings_to_eeprom </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tuner_8cpp_source.html#l00068">68</a> of file <a class="el" href="tuner_8cpp_source.html">tuner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="constants_8h.html#a73afc0e3de7253b20d26d43395608527">LANE_COUNT</a>; i++)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordtype">int</span> address = 1 + <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a1aade9389993911d5c5bcdf3d9f9fec9">Tuning</a>) * i;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        EEPROM.put(address, <a class="code" href="class_tuner.html#a6d9f05f42a8be248404062d55583d703">_tunings</a>[i]);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a19d286601d2ae0ccbb7c18c45ba07c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19d286601d2ae0ccbb7c18c45ba07c34">&#9670;&nbsp;</a></span>get_tuning_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_tuning.html">Tuning</a> * Tuner::get_tuning_ref </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lane_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Getter for tuning parameters, used by <code><a class="el" href="class_lane.html">Lane</a></code> objects.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lane_id</td><td><a class="el" href="class_lane.html">Lane</a> id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A reference to the tuning parameters </dd></dl>

<p class="definition">Definition at line <a class="el" href="tuner_8cpp_source.html#l00041">41</a> of file <a class="el" href="tuner_8cpp_source.html">tuner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="class_tuner.html#a6d9f05f42a8be248404062d55583d703">_tunings</a>[lane_id];</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afb69c9b1224835c6099c3a39cb153749"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb69c9b1224835c6099c3a39cb153749">&#9670;&nbsp;</a></span>reset_tunings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tuner::reset_tunings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset all tuning parameters to default (no offset, no scaling). Write the changes to EEPROM. </p>

<p class="definition">Definition at line <a class="el" href="tuner_8cpp_source.html#l00046">46</a> of file <a class="el" href="tuner_8cpp_source.html">tuner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    digitalWrite(<a class="code" href="constants_8h.html#aa45d675cb144795d01e598cdb310d329">PIN_LED_TUNING_RESET</a>, HIGH);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="constants_8h.html#a73afc0e3de7253b20d26d43395608527">LANE_COUNT</a>; i++)</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="class_tuner.html#a6d9f05f42a8be248404062d55583d703">_tunings</a>[i] = {0.0f, 1.0f};</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="class_tuner.html#a3c273f35f532e479b07cf102827327be">_write_tunings_to_eeprom</a>();</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    digitalWrite(<a class="code" href="constants_8h.html#aa45d675cb144795d01e598cdb310d329">PIN_LED_TUNING_RESET</a>, LOW);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
<div class="ttc" id="aclass_tuner_html_a3c273f35f532e479b07cf102827327be"><div class="ttname"><a href="class_tuner.html#a3c273f35f532e479b07cf102827327be">Tuner::_write_tunings_to_eeprom</a></div><div class="ttdeci">void _write_tunings_to_eeprom()</div><div class="ttdef"><b>Definition:</b> <a href="tuner_8cpp_source.html#l00068">tuner.cpp:68</a></div></div>
<div class="ttc" id="aconstants_8h_html_aa45d675cb144795d01e598cdb310d329"><div class="ttname"><a href="constants_8h.html#aa45d675cb144795d01e598cdb310d329">PIN_LED_TUNING_RESET</a></div><div class="ttdeci">#define PIN_LED_TUNING_RESET</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00049">constants.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7ab2775d9b3a5e5c6c2e6fc729bc114"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7ab2775d9b3a5e5c6c2e6fc729bc114">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tuner::setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize hardware connections. Must be called once in the main program setup phase. If this is the first time the board boots, it writes the EEPROM with default values. Otherwise, reads previous tuning parameters from the EEPROM. </p>

<p class="definition">Definition at line <a class="el" href="tuner_8cpp_source.html#l00014">14</a> of file <a class="el" href="tuner_8cpp_source.html">tuner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;{</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="keywordtype">byte</span> eeprom_first_byte = EEPROM.read(0);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keywordflow">if</span> (eeprom_first_byte == 255)</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        EEPROM.write(0, 0);</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <a class="code" href="class_tuner.html#a3c273f35f532e479b07cf102827327be">_write_tunings_to_eeprom</a>();</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    }</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        <a class="code" href="class_tuner.html#afad0b11daba99cec12cb65a08a6ce035">_read_tunings_from_eeprom</a>();</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    }</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    pinMode(<a class="code" href="constants_8h.html#a0ff68e49e78eb1079607630bc8b10b36">PIN_CV_LOOPBACK_1</a>, INPUT);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    pinMode(<a class="code" href="constants_8h.html#a2a8401fa74c03fda58efb30dd864cc3e">PIN_CV_LOOPBACK_2</a>, INPUT);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    pinMode(<a class="code" href="constants_8h.html#a3d60c25b5f1c4a038cceee40fe3b9f5a">PIN_CV_LOOPBACK_3</a>, INPUT);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    pinMode(<a class="code" href="constants_8h.html#a61e9ee5e1579a4facd355b2b88128205">PIN_CV_LOOPBACK_4</a>, INPUT);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    pinMode(<a class="code" href="constants_8h.html#ac3363c3b86c294b1928ade573b8a9649">PIN_CV_LOOPBACK_5</a>, INPUT);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    pinMode(<a class="code" href="constants_8h.html#a9cef6f4904e0b433c0b720e7d8cfee0f">PIN_CV_LOOPBACK_6</a>, INPUT);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    pinMode(<a class="code" href="constants_8h.html#ab9d2b4a26f18d223ed16ff60c57ddb0e">PIN_CV_LOOPBACK_7</a>, INPUT);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    pinMode(<a class="code" href="constants_8h.html#a383141c294afa1efb625a4e069cbaa9d">PIN_CV_LOOPBACK_8</a>, INPUT);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    pinMode(<a class="code" href="constants_8h.html#a340fe2c3bf8d70018cce388fa619fab8">PIN_CV_LOOPBACK_9</a>, INPUT);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    pinMode(<a class="code" href="constants_8h.html#a6db84a9952386e313dc254f8bcc3e0ec">PIN_CV_LOOPBACK_10</a>, INPUT);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    pinMode(<a class="code" href="constants_8h.html#a01b8a5abe8a7cf7579e3656f995e903f">PIN_LED_TUNING_FAST</a>, OUTPUT);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    pinMode(<a class="code" href="constants_8h.html#aed2b93d3f081a3b436e253a5d9af5d03">PIN_LED_TUNING_FULL</a>, OUTPUT);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    pinMode(<a class="code" href="constants_8h.html#aa45d675cb144795d01e598cdb310d329">PIN_LED_TUNING_RESET</a>, OUTPUT);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
<div class="ttc" id="aclass_tuner_html_afad0b11daba99cec12cb65a08a6ce035"><div class="ttname"><a href="class_tuner.html#afad0b11daba99cec12cb65a08a6ce035">Tuner::_read_tunings_from_eeprom</a></div><div class="ttdeci">void _read_tunings_from_eeprom()</div><div class="ttdef"><b>Definition:</b> <a href="tuner_8cpp_source.html#l00057">tuner.cpp:57</a></div></div>
<div class="ttc" id="aconstants_8h_html_a01b8a5abe8a7cf7579e3656f995e903f"><div class="ttname"><a href="constants_8h.html#a01b8a5abe8a7cf7579e3656f995e903f">PIN_LED_TUNING_FAST</a></div><div class="ttdeci">#define PIN_LED_TUNING_FAST</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00047">constants.h:47</a></div></div>
<div class="ttc" id="aconstants_8h_html_a0ff68e49e78eb1079607630bc8b10b36"><div class="ttname"><a href="constants_8h.html#a0ff68e49e78eb1079607630bc8b10b36">PIN_CV_LOOPBACK_1</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_1</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00011">constants.h:11</a></div></div>
<div class="ttc" id="aconstants_8h_html_a2a8401fa74c03fda58efb30dd864cc3e"><div class="ttname"><a href="constants_8h.html#a2a8401fa74c03fda58efb30dd864cc3e">PIN_CV_LOOPBACK_2</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_2</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00012">constants.h:12</a></div></div>
<div class="ttc" id="aconstants_8h_html_a340fe2c3bf8d70018cce388fa619fab8"><div class="ttname"><a href="constants_8h.html#a340fe2c3bf8d70018cce388fa619fab8">PIN_CV_LOOPBACK_9</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_9</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00019">constants.h:19</a></div></div>
<div class="ttc" id="aconstants_8h_html_a383141c294afa1efb625a4e069cbaa9d"><div class="ttname"><a href="constants_8h.html#a383141c294afa1efb625a4e069cbaa9d">PIN_CV_LOOPBACK_8</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_8</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00018">constants.h:18</a></div></div>
<div class="ttc" id="aconstants_8h_html_a3d60c25b5f1c4a038cceee40fe3b9f5a"><div class="ttname"><a href="constants_8h.html#a3d60c25b5f1c4a038cceee40fe3b9f5a">PIN_CV_LOOPBACK_3</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_3</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00013">constants.h:13</a></div></div>
<div class="ttc" id="aconstants_8h_html_a61e9ee5e1579a4facd355b2b88128205"><div class="ttname"><a href="constants_8h.html#a61e9ee5e1579a4facd355b2b88128205">PIN_CV_LOOPBACK_4</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_4</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00014">constants.h:14</a></div></div>
<div class="ttc" id="aconstants_8h_html_a6db84a9952386e313dc254f8bcc3e0ec"><div class="ttname"><a href="constants_8h.html#a6db84a9952386e313dc254f8bcc3e0ec">PIN_CV_LOOPBACK_10</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_10</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00020">constants.h:20</a></div></div>
<div class="ttc" id="aconstants_8h_html_a9cef6f4904e0b433c0b720e7d8cfee0f"><div class="ttname"><a href="constants_8h.html#a9cef6f4904e0b433c0b720e7d8cfee0f">PIN_CV_LOOPBACK_6</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_6</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00016">constants.h:16</a></div></div>
<div class="ttc" id="aconstants_8h_html_ab9d2b4a26f18d223ed16ff60c57ddb0e"><div class="ttname"><a href="constants_8h.html#ab9d2b4a26f18d223ed16ff60c57ddb0e">PIN_CV_LOOPBACK_7</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_7</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00017">constants.h:17</a></div></div>
<div class="ttc" id="aconstants_8h_html_ac3363c3b86c294b1928ade573b8a9649"><div class="ttname"><a href="constants_8h.html#ac3363c3b86c294b1928ade573b8a9649">PIN_CV_LOOPBACK_5</a></div><div class="ttdeci">#define PIN_CV_LOOPBACK_5</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00015">constants.h:15</a></div></div>
<div class="ttc" id="aconstants_8h_html_aed2b93d3f081a3b436e253a5d9af5d03"><div class="ttname"><a href="constants_8h.html#aed2b93d3f081a3b436e253a5d9af5d03">PIN_LED_TUNING_FULL</a></div><div class="ttdeci">#define PIN_LED_TUNING_FULL</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00048">constants.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8962f486cba07837bd690300aeb9637a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8962f486cba07837bd690300aeb9637a">&#9670;&nbsp;</a></span>tune_fast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tuner::tune_fast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_allocator.html">Allocator</a> *&#160;</td>
          <td class="paramname"><em>allocator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Automatically compute the offset tuning parameters, for all lanes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allocator</td><td>A pointer to the allocator for broadcasting a signal. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tuner_8cpp_source.html#l00144">144</a> of file <a class="el" href="tuner_8cpp_source.html">tuner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    digitalWrite(<a class="code" href="constants_8h.html#a01b8a5abe8a7cf7579e3656f995e903f">PIN_LED_TUNING_FAST</a>, HIGH);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    allocator-&gt;<a class="code" href="class_allocator.html#ac0b00e8377f23b4775cb2c3cf6e79f25">reset</a>();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordtype">int</span> tuning_setpoint = (int)<a class="code" href="class_lane.html#ab54460a59d5d406f502e6643743ad7f9">Lane::base_pitch_to_voltage</a>((<span class="keywordtype">float</span>)<a class="code" href="constants_8h.html#ae4b45b7a14adb95f9b6ca87f893f729e">TUNING_OFFSET_PITCH</a>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (tuning_setpoint &lt; 0)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        tuning_setpoint = 0;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tuning_setpoint &gt; <a class="code" href="constants_8h.html#a47580cc5f371cab4485280db10855e6e">DAC_VMAX</a>)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        tuning_setpoint = <a class="code" href="constants_8h.html#a47580cc5f371cab4485280db10855e6e">DAC_VMAX</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    allocator-&gt;<a class="code" href="class_allocator.html#a4e01e87d6ad1fe370b4c2b4f073f13f0">broadcast</a>(tuning_setpoint, <a class="code" href="constants_8h.html#accc28abc0077faabf365d2e2d4b06a8c">GATE_STATE_DURING_TUNING</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">float</span> estimated_frequencies[<a class="code" href="constants_8h.html#a73afc0e3de7253b20d26d43395608527">LANE_COUNT</a>];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="tuner_8cpp.html#a73e5ab8db80ceec9a5d454a656720e78">estimate_frequencies</a>(estimated_frequencies);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="constants_8h.html#a73afc0e3de7253b20d26d43395608527">LANE_COUNT</a>; i++)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordtype">float</span> estimated_pitch = 12.0f * log(estimated_frequencies[i] / <a class="code" href="constants_8h.html#ac576ca8e10690261eee7d5914c156f4b">TUNING_REFERENCE_FREQUENCY</a>) / <a class="code" href="constants_8h.html#a07267dcd6834194cfed517197ab1e2ad">LOG2</a> + 69.0f;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordtype">float</span> estimated_setpoint = <a class="code" href="class_lane.html#ab54460a59d5d406f502e6643743ad7f9">Lane::base_pitch_to_voltage</a>(estimated_pitch);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="class_tuner.html#a6d9f05f42a8be248404062d55583d703">_tunings</a>[i].<a class="code" href="struct_tuning.html#a34432397dcb7acf4d626b8bb38867515">offset</a> = (float)tuning_setpoint - estimated_setpoint;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="class_tuner.html#a3c273f35f532e479b07cf102827327be">_write_tunings_to_eeprom</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    allocator-&gt;<a class="code" href="class_allocator.html#ac0b00e8377f23b4775cb2c3cf6e79f25">reset</a>();</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    digitalWrite(<a class="code" href="constants_8h.html#a01b8a5abe8a7cf7579e3656f995e903f">PIN_LED_TUNING_FAST</a>, LOW);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
<div class="ttc" id="aclass_allocator_html_a4e01e87d6ad1fe370b4c2b4f073f13f0"><div class="ttname"><a href="class_allocator.html#a4e01e87d6ad1fe370b4c2b4f073f13f0">Allocator::broadcast</a></div><div class="ttdeci">void broadcast(int setpoint, int gate)</div><div class="ttdef"><b>Definition:</b> <a href="allocator_8cpp_source.html#l00157">allocator.cpp:157</a></div></div>
<div class="ttc" id="aclass_allocator_html_ac0b00e8377f23b4775cb2c3cf6e79f25"><div class="ttname"><a href="class_allocator.html#ac0b00e8377f23b4775cb2c3cf6e79f25">Allocator::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="allocator_8cpp_source.html#l00019">allocator.cpp:19</a></div></div>
<div class="ttc" id="aclass_lane_html_ab54460a59d5d406f502e6643743ad7f9"><div class="ttname"><a href="class_lane.html#ab54460a59d5d406f502e6643743ad7f9">Lane::base_pitch_to_voltage</a></div><div class="ttdeci">static float base_pitch_to_voltage(float pitch)</div><div class="ttdef"><b>Definition:</b> <a href="lane_8cpp_source.html#l00116">lane.cpp:116</a></div></div>
<div class="ttc" id="aconstants_8h_html_a07267dcd6834194cfed517197ab1e2ad"><div class="ttname"><a href="constants_8h.html#a07267dcd6834194cfed517197ab1e2ad">LOG2</a></div><div class="ttdeci">#define LOG2</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00094">constants.h:94</a></div></div>
<div class="ttc" id="aconstants_8h_html_a47580cc5f371cab4485280db10855e6e"><div class="ttname"><a href="constants_8h.html#a47580cc5f371cab4485280db10855e6e">DAC_VMAX</a></div><div class="ttdeci">#define DAC_VMAX</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00101">constants.h:101</a></div></div>
<div class="ttc" id="aconstants_8h_html_ac576ca8e10690261eee7d5914c156f4b"><div class="ttname"><a href="constants_8h.html#ac576ca8e10690261eee7d5914c156f4b">TUNING_REFERENCE_FREQUENCY</a></div><div class="ttdeci">#define TUNING_REFERENCE_FREQUENCY</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00113">constants.h:113</a></div></div>
<div class="ttc" id="aconstants_8h_html_accc28abc0077faabf365d2e2d4b06a8c"><div class="ttname"><a href="constants_8h.html#accc28abc0077faabf365d2e2d4b06a8c">GATE_STATE_DURING_TUNING</a></div><div class="ttdeci">#define GATE_STATE_DURING_TUNING</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00109">constants.h:109</a></div></div>
<div class="ttc" id="aconstants_8h_html_ae4b45b7a14adb95f9b6ca87f893f729e"><div class="ttname"><a href="constants_8h.html#ae4b45b7a14adb95f9b6ca87f893f729e">TUNING_OFFSET_PITCH</a></div><div class="ttdeci">#define TUNING_OFFSET_PITCH</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00112">constants.h:112</a></div></div>
<div class="ttc" id="astruct_tuning_html_a34432397dcb7acf4d626b8bb38867515"><div class="ttname"><a href="struct_tuning.html#a34432397dcb7acf4d626b8bb38867515">Tuning::offset</a></div><div class="ttdeci">float offset</div><div class="ttdoc">Affine offset. Default is 0.0f (no offset).</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00024">structs.h:24</a></div></div>
<div class="ttc" id="atuner_8cpp_html_a73e5ab8db80ceec9a5d454a656720e78"><div class="ttname"><a href="tuner_8cpp.html#a73e5ab8db80ceec9a5d454a656720e78">estimate_frequencies</a></div><div class="ttdeci">void estimate_frequencies(float *frequencies)</div><div class="ttdef"><b>Definition:</b> <a href="tuner_8cpp_source.html#l00077">tuner.cpp:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6d9f05f42a8be248404062d55583d703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d9f05f42a8be248404062d55583d703">&#9670;&nbsp;</a></span>_tunings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_tuning.html">Tuning</a> Tuner::_tunings[<a class="el" href="constants_8h.html#a73afc0e3de7253b20d26d43395608527">LANE_COUNT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tuner_8h_source.html#l00049">49</a> of file <a class="el" href="tuner_8h_source.html">tuner.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/include/<a class="el" href="tuner_8h_source.html">tuner.h</a></li>
<li>src/src/<a class="el" href="tuner_8cpp_source.html">tuner.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_tuner.html">Tuner</a></li>
    <li class="footer">Generated on Sun Sep 1 2024 21:05:59 for MIDI-VCO by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
